# =============================================================================
# Cybersec Monitoring - Lab Environment Configuration
# =============================================================================
# Demo configuration for training lab
# =============================================================================

# -----------------------------------------------------------------------------
# LAB ENVIRONMENT
# -----------------------------------------------------------------------------
# Network: 10.0.1.0/24
# - 10.0.1.2 - Debian 13 (Monitoring Server)
# - 10.0.1.3 - Windows Server 2025 (DC, monadmin)
# - 10.0.1.4 - Windows 11 Client (LAB\pc)
# Domain: LAB (lab.local)
# -----------------------------------------------------------------------------

# Часовий пояс
TZ=Europe/Kyiv

# Ім'я організації (відображається в Grafana)
ORGANIZATION_NAME="LAB Training"

# IP/hostname сервера моніторингу (без http://)
# Debian 13 сервер моніторингу
MONITORING_SERVER_IP=10.0.1.2

# -----------------------------------------------------------------------------
# GRAFANA
# -----------------------------------------------------------------------------
# Адміністратор Grafana
GRAFANA_ADMIN_USER=monadmin
GRAFANA_ADMIN_PASSWORD=Mon!123admin

# Порт Grafana (за замовчуванням 3000)
GRAFANA_PORT=3000

# Секретний ключ для cookies (згенеровано: openssl rand -hex 32)
GRAFANA_SECRET_KEY=372e4953ba23b87c1bf9ec8d5e0122870453aa8aa892d44242c65880d1c59ed6

# -----------------------------------------------------------------------------
# PROMETHEUS
# -----------------------------------------------------------------------------
# Порт Prometheus (за замовчуванням 9090)
PROMETHEUS_PORT=9090

# Retention період (скільки зберігати метрики)
PROMETHEUS_RETENTION_TIME=30d

# -----------------------------------------------------------------------------
# LOKI
# -----------------------------------------------------------------------------
# Порт Loki (за замовчуванням 3100)
LOKI_PORT=3100

# URL для агентів (Promtail)
LOKI_URL=http://${MONITORING_SERVER_IP}:${LOKI_PORT}

# Retention період для логів (180 днів = 6 місяців за вимогою CERT-UA)
LOKI_RETENTION_PERIOD=4320h

# -----------------------------------------------------------------------------
# ALERTMANAGER
# -----------------------------------------------------------------------------
# Порт Alertmanager
ALERTMANAGER_PORT=9093

# -----------------------------------------------------------------------------
# EMAIL СПОВІЩЕННЯ
# -----------------------------------------------------------------------------
# Для ДЕМО: використовується Mailpit (локальний catch-all SMTP з web UI)
# Web UI: http://10.0.1.2:8025
# Для PRODUCTION: замініть на справжній SMTP сервер

# Mailpit працює на localhost:1025 (SMTP) та localhost:8025 (Web UI)
SMTP_SMARTHOST=mailpit:1025
SMTP_FROM=monitoring@lab.local
SMTP_AUTH_USERNAME=
SMTP_AUTH_PASSWORD=
SMTP_REQUIRE_TLS=false

# Email отримувача алертів (всі листи видно в Mailpit UI)
ALERT_EMAIL_TO=admin@lab.local

# Mailpit порти
MAILPIT_SMTP_PORT=1025
MAILPIT_WEB_PORT=8025

# Pushover (опціонально, для мобільних сповіщень)
# Отримати на https://pushover.net/
PUSHOVER_USER_KEY=
PUSHOVER_API_TOKEN=

# -----------------------------------------------------------------------------
# NETDISCO (Інвентаризація мережі)
# Ref: https://github.com/netdisco/netdisco-docker
# -----------------------------------------------------------------------------
NETDISCO_PORT=5000
NETDISCO_DB_PASSWORD=NetdiscoLab2024!

# PostgreSQL version in netdisco image (check: docker run --rm -e NETDISCO_CURRENT_PG_VERSION=18 --entrypoint env netdisco/netdisco:latest-postgresql | grep PG_MAJOR)
# Latest netdisco-postgresql uses PostgreSQL 18
NETDISCO_CURRENT_PG_VERSION=18

# SNMP community string (primary community for discovery)
# Additional communities can be configured in deployment.yml
SNMP_COMMUNITY=public

# Netdisco admin user (created on first run with DEPLOY_ADMIN_USER=YES)
NETDISCO_ADMIN_USER=monadmin
# Leave empty to set password via web UI on first login
NETDISCO_ADMIN_PASS=

# -----------------------------------------------------------------------------
# FLEETDM (Інвентаризація endpoints)
# -----------------------------------------------------------------------------
FLEET_PORT=8080
FLEET_MYSQL_ROOT_PASSWORD=FleetRootLab2024!
FLEET_MYSQL_PASSWORD=FleetLab2024!
# Base64 key для JWT токенів (згенеровано: openssl rand -base64 32)
FLEET_SERVER_PRIVATE_KEY=99CevlvuIlJMkqxeesSfqNzHeN/LRogdxNika05Wr24=

# -----------------------------------------------------------------------------
# WINDOWS AGENT НАЛАШТУВАННЯ
# -----------------------------------------------------------------------------
# URL Loki для Windows агентів
WINDOWS_LOKI_URL=http://${MONITORING_SERVER_IP}:${LOKI_PORT}/loki/api/v1/push

# FleetDM Enrollment Secret
# ВАЖЛИВО: Цей ключ генерується при першому запуску FleetDM!
# 1. Запустіть FleetDM: docker compose up -d
# 2. Відкрийте http://10.0.1.2:8080 і завершіть setup wizard
# 3. Скопіюйте enroll secret з UI: Settings -> Organization -> Enroll secret
# 4. Вставте тут для використання в скриптах розгортання агентів
FLEET_ENROLL_SECRET=ОТРИМАТИ_З_FLEET_UI_ПІСЛЯ_ЗАПУСКУ

# -----------------------------------------------------------------------------
# ТЕСТУВАННЯ (Kali)
# -----------------------------------------------------------------------------
# Цільові Windows машини для тестів
# Windows Server 2025 (Domain Controller)
TARGET_WINDOWS_SERVER_IP=10.0.1.3
TARGET_SERVER_USER=monadmin
TARGET_SERVER_PASSWORD=Mon!123admin

# Windows 11 Client
TARGET_WINDOWS_CLIENT_IP=10.0.1.4
TARGET_CLIENT_USER=pc
TARGET_CLIENT_PASSWORD=Mon!123admin

# AD Domain
TARGET_WINDOWS_DOMAIN=LAB
TARGET_DOMAIN_FQDN=lab.local

# -----------------------------------------------------------------------------
# ДОДАТКОВІ НАЛАШТУВАННЯ
# -----------------------------------------------------------------------------
# Рівень логування (debug, info, warn, error)
LOG_LEVEL=info

# Увімкнути debug режим (true/false)
DEBUG_MODE=false
